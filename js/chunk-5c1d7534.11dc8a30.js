(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c1d7534"],{"00b4":function(e,t,c){"use strict";c("ac1f");var a=c("23e7"),n=c("da84"),o=c("c65b"),l=c("e330"),r=c("1626"),s=c("861d"),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=n.Error,u=l(/./.test);a({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=this.exec;if(!r(t))return u(this,e);var c=o(t,this,e);if(null!==c&&!s(c))throw new d("RegExp exec method returned something other than an Object or null");return!!c}})},"6be2":function(e,t,c){"use strict";var a=c("1344"),n=Object(a["a"])();t["a"]=n},a2f2:function(e,t,c){},b0c0:function(e,t,c){var a=c("83ab"),n=c("5e77").EXISTS,o=c("e330"),l=c("9bf2").f,r=Function.prototype,s=o(r.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(i.exec),u="name";a&&!n&&l(r,u,{configurable:!0,get:function(){try{return d(i,s(this))[1]}catch(e){return""}}})},cc55:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("b64b");var a=c("7a23"),n=function(e){return Object(a["pushScopeId"])("data-v-15c5490f"),e=e(),Object(a["popScopeId"])(),e},o={class:"container mt-5"},l=Object(a["createStaticVNode"])('<ul class="steps list-unstyled d-flex justify-content-between position-relative mx-auto" data-v-15c5490f><li class="steps-item active w-33 d-flex flex-column align-items-center py-2 px-4" data-v-15c5490f><p class="small rounded-circle text-center mb-2" data-v-15c5490f> 1 </p> 資料填寫 </li><li class="steps-item w-33 d-flex flex-column align-items-center py-2 px-4" data-v-15c5490f><p class="small rounded-circle text-center mb-2" data-v-15c5490f> 2 </p> 訂單建立 </li><li class="steps-item w-33 d-flex flex-column align-items-center py-2 px-4" data-v-15c5490f><p class="small rounded-circle text-center mb-2" data-v-15c5490f> 3 </p> 完成訂單 </li></ul>',1),r={class:"text-end"},s=["disabled"],i=n((function(){return Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("h4",{class:"text-primary text-center border-bottom d-flex align-items-center justify-content-center position-relative pb-3 mb-0"}," 購物清單 ")],-1)})),d={class:"list-unstyled border-bottom py-4 mb-3"},u={class:"row align-items-center"},m={class:"col-3 p-0"},b=["src"],p={class:"p-0 col-6"},f={class:"d-flex m-0 w-100 align-items-center"},h={class:"p-0 col-8"},v={class:"productName"},j={class:"p-0 col-2"},O={class:"input-group input-group-sm"},g={class:"input-group"},V=["onUpdate:modelValue","onBlur","disabled"],N={class:"input-group-text",id:"basic-addon2"},E={class:"col-2 p-0"},x={class:"productTotal text-center"},y={class:"col-1 p-0"},C={class:"productDel text-center"},S=["onClick","disabled"],w=n((function(){return Object(a["createElementVNode"])("i",{class:"bx bxs-trash-alt"},null,-1)})),k=[w],I={class:"input-group mb-3 input-group-sm"},$={class:"input-group-append"},L={class:"row"},_=n((function(){return Object(a["createElementVNode"])("div",{class:"col-3 p-0"},null,-1)})),D={class:"d-flex col-6 p-0"},U={class:"col-6 text-center summary"},B=n((function(){return Object(a["createElementVNode"])("div",{div:"",class:"col-6 text-center summary"}," 總計 ",-1)})),M={class:"col-2 p-0"},q={class:"text-center"},T=n((function(){return Object(a["createElementVNode"])("div",{class:"col-1 p-0"},null,-1)})),F={class:"my-5 row justify-content-center"},z=n((function(){return Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("h4",{class:"text-primary text-center border-bottom d-flex align-items-center justify-content-center position-relative pb-3 mb-0"}," 訂購人資訊 ")],-1)})),A={class:"mb-3"},J=n((function(){return Object(a["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1)})),P={class:"mb-3"},R=n((function(){return Object(a["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1)})),X={class:"mb-3"},G=n((function(){return Object(a["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1)})),H={class:"mb-3"},K=n((function(){return Object(a["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1)})),Q={class:"mb-3"},W=n((function(){return Object(a["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1)})),Y={class:"text-end"},Z=["disabled"];function ee(e,t,c,n,w,ee){var te=Object(a["resolveComponent"])("Loading"),ce=Object(a["resolveComponent"])("Field"),ae=Object(a["resolveComponent"])("ErrorMessage"),ne=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",null,[Object(a["createVNode"])(te,{active:w.isLoading},null,8,["active"]),l,Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-gray w-10 py-2 me-md-2 mb-2 mb-md-0",type:"button",disabled:0===w.cart.carts.length,onClick:t[0]||(t[0]=function(e){return ee.deleteAllCarts()})},"清空購物車",8,s)]),i,Object(a["createElementVNode"])("ul",d,[w.cart.carts?(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(w.cart.carts,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:t.id,class:"row justify-content-between mb-4"},[Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("img",{src:t.product.imageUrl,alt:"",class:"product-img"},null,8,b)]),Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("div",f,[Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",v,Object(a["toDisplayString"])(t.product.title),1)]),Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("div",g,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},onBlur:function(e){return ee.updateCart(t)},disabled:w.loadingStatus.loadingItem===t.id},null,40,V),[[a["vModelText"],t.qty,void 0,{number:!0}]]),Object(a["createElementVNode"])("span",N,Object(a["toDisplayString"])(t.product.unit),1)])])])])]),Object(a["createElementVNode"])("div",E,[Object(a["createElementVNode"])("div",x," NT"+Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)]),Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("span",null,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-pink btn-sm",onClick:function(e){return ee.removeCartItem(t.id)},disabled:w.loadingStatus.loadingItem===t.id},k,8,S)])])])])])})),128)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("div",I,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return w.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],w.coupon_code]]),Object(a["createElementVNode"])("div",$,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-gray",type:"button",onClick:t[2]||(t[2]=function(){return ee.addCouponCode&&ee.addCouponCode.apply(ee,arguments)})}," 套用優惠碼 ")])]),Object(a["createElementVNode"])("div",L,[_,Object(a["createElementVNode"])("div",D,[Object(a["createElementVNode"])("div",U," 共 "+Object(a["toDisplayString"])(w.cart.carts.length)+" 項 ",1),B]),Object(a["createElementVNode"])("div",M,[Object(a["createElementVNode"])("div",q," NT"+Object(a["toDisplayString"])(e.$filters.currency(w.cart.total)),1)]),T])]),Object(a["createElementVNode"])("div",F,[z,Object(a["createVNode"])(ne,{ref:"form",class:"col-md-6 py-4",onSubmit:ee.onSubmit},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createElementVNode"])("div",A,[J,Object(a["createVNode"])(ce,{id:"email",name:"email",type:"email",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:w.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return w.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(ae,{name:"email",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",P,[R,Object(a["createVNode"])(ce,{id:"name",name:"姓名",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:w.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return w.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(ae,{name:"姓名",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",X,[G,Object(a["createVNode"])(ce,{id:"tel",name:"電話",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"0912345678",rules:ee.isPhone,modelValue:w.form.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return w.form.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["createVNode"])(ae,{name:"電話",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",H,[K,Object(a["createVNode"])(ce,{id:"address",name:"地址",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:w.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return w.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(ae,{name:"地址",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",Q,[W,Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[7]||(t[7]=function(e){return w.form.message=e})},null,512),[[a["vModelText"],w.form.message]])]),Object(a["createElementVNode"])("div",Y,[Object(a["createElementVNode"])("button",{type:"submit",class:"btn btn-outline-pink",disabled:0===w.cart.carts.length||Object.keys(c).length>0}," 送出訂單 ",8,Z)])]})),_:1},8,["onSubmit"])])])}c("99af"),c("ac1f"),c("00b4");var te=c("6be2"),ce={data:function(){return{loadingStatus:{loadingItem:""},isLoading:!1,cart:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:""}},mounted:function(){this.getCart()},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/cart");this.$http.get(t).then((function(t){e.cart=t.data.data,e.isLoading=!1})).catch((function(e){alert(e.data.message)}))},removeCartItem:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/cart/").concat(e);this.loadingStatus.loadingItem=e,this.$http.delete(c).then((function(e){alert(e.data.message),te["a"].emit("get-cart"),t.getCart()})).catch((function(e){alert(e.data.message)})),this.loadingStatus.loadingItem="",this.isLoading=!1},updateCart:function(e){var t=this;this.loadingStatus.loadingItem=e.id;var c={product_id:e.product_id,qty:e.qty};this.$http.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/cart/").concat(e.id),{data:c}).then((function(e){alert(e.data.message),t.loadingStatus.loadingItem="",t.getCart()})).catch((function(e){alert(e.data.message),t.loadingStatus.loadingItem=""}))},deleteAllCarts:function(){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/carts")).then((function(t){alert(t.data.message),te["a"].emit("get-cart"),e.getCart()})).catch((function(e){alert(e.data.message)}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"請輸入正確的號碼格式"},onSubmit:function(){var e=this;this.isLoading=!0;var t=this.form;this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/order"),{data:t}).then((function(t){e.$httpMessageState(t,"建立訂單"),e.$router.push("/checkout/".concat(t.data.orderId)),e.$refs.form.resetForm(),e.form.message="",e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"建立訂單")}))},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("shila-hexschool","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:c}).then((function(t){e.$httpMessageState(t,"加入優惠券"),e.getCart(),e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"加入優惠券")}))}}},ae=(c("ef9c"),c("6b0d")),ne=c.n(ae);const oe=ne()(ce,[["render",ee],["__scopeId","data-v-15c5490f"]]);t["default"]=oe},ef9c:function(e,t,c){"use strict";c("a2f2")}}]);
//# sourceMappingURL=chunk-5c1d7534.11dc8a30.js.map